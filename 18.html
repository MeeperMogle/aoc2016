<script>
    const sampleInput = '.^^.^.^^^^';
    const sampleRows = 10;

    const input1 = '...^^^^^..^...^...^^^^^^...^.^^^.^.^.^^.^^^.....^.^^^...^^^^^^.....^.^^...^^^^^...^.^^^.^^......^^^^';
    const rows1 = 40;

    const rows2 = 400000;

    const inputToUse = input1;
    const rowsToUse = rows2;
    const rowWidth = inputToUse.length;

    const rows = [inputToUse.split('')];

    for (let row=1; row < rowsToUse; row++) {
        const newRow = [];

        for (let column = 0; column < rowWidth; column++ ) {
            const left = column - 1 >= 0 ? rows[row - 1][column - 1] : '.';
            const right = column + 1 < rowWidth ? rows[row - 1][column + 1] : '.';
            const center = rows[row-1][column];

            const trap = (left === '^' && center === '^' && right !== '^') ||
                  (center === '^' && right === '^' && left !== '^') ||
                  (left === '^' && right !== '^' && center !== '^') ||
                  (right === '^' && left !== '^' && center !== '^');

            newRow.push( trap ? '^' : '.' );
        }
        rows.push(newRow);
    }

    let output = '';
    rows.forEach(row => {
        row.forEach(column => {
            output += column;
        });
        output += '\n';
    });
//    console.log(output);

    console.log('Safe Tiles:', output.split('.').length - 1);
</script>
