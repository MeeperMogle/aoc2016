<script>
    const input = ['rect 1x1','rotate row y=0 by 5','rect 1x1','rotate row y=0 by 5','rect 1x1','rotate row y=0 by 3','rect 1x1','rotate row y=0 by 2','rect 1x1','rotate row y=0 by 3','rect 1x1','rotate row y=0 by 2','rect 1x1','rotate row y=0 by 5','rect 1x1','rotate row y=0 by 5','rect 1x1','rotate row y=0 by 3','rect 1x1','rotate row y=0 by 2','rect 1x1','rotate row y=0 by 3','rect 2x1','rotate row y=0 by 2','rect 1x2','rotate row y=1 by 5','rotate row y=0 by 3','rect 1x2','rotate column x=30 by 1','rotate column x=25 by 1','rotate column x=10 by 1','rotate row y=1 by 5','rotate row y=0 by 2','rect 1x2','rotate row y=0 by 5','rotate column x=0 by 1','rect 4x1','rotate row y=2 by 18','rotate row y=0 by 5','rotate column x=0 by 1','rect 3x1','rotate row y=2 by 12','rotate row y=0 by 5','rotate column x=0 by 1','rect 4x1','rotate column x=20 by 1','rotate row y=2 by 5','rotate row y=0 by 5','rotate column x=0 by 1','rect 4x1','rotate row y=2 by 15','rotate row y=0 by 15','rotate column x=10 by 1','rotate column x=5 by 1','rotate column x=0 by 1','rect 14x1','rotate column x=37 by 1','rotate column x=23 by 1','rotate column x=7 by 2','rotate row y=3 by 20','rotate row y=0 by 5','rotate column x=0 by 1','rect 4x1','rotate row y=3 by 5','rotate row y=2 by 2','rotate row y=1 by 4','rotate row y=0 by 4','rect 1x4','rotate column x=35 by 3','rotate column x=18 by 3','rotate column x=13 by 3','rotate row y=3 by 5','rotate row y=2 by 3','rotate row y=1 by 1','rotate row y=0 by 1','rect 1x5','rotate row y=4 by 20','rotate row y=3 by 10','rotate row y=2 by 13','rotate row y=0 by 10','rotate column x=5 by 1','rotate column x=3 by 3','rotate column x=2 by 1','rotate column x=1 by 1','rotate column x=0 by 1','rect 9x1','rotate row y=4 by 10','rotate row y=3 by 10','rotate row y=1 by 10','rotate row y=0 by 10','rotate column x=7 by 2','rotate column x=5 by 1','rotate column x=2 by 1','rotate column x=1 by 1','rotate column x=0 by 1','rect 9x1','rotate row y=4 by 20','rotate row y=3 by 12','rotate row y=1 by 15','rotate row y=0 by 10','rotate column x=8 by 2','rotate column x=7 by 1','rotate column x=6 by 2','rotate column x=5 by 1','rotate column x=3 by 1','rotate column x=2 by 1','rotate column x=1 by 1','rotate column x=0 by 1','rect 9x1','rotate column x=46 by 2','rotate column x=43 by 2','rotate column x=24 by 2','rotate column x=14 by 3','rotate row y=5 by 15','rotate row y=4 by 10','rotate row y=3 by 3','rotate row y=2 by 37','rotate row y=1 by 10','rotate row y=0 by 5','rotate column x=0 by 3','rect 3x3','rotate row y=5 by 15','rotate row y=3 by 10','rotate row y=2 by 10','rotate row y=0 by 10','rotate column x=7 by 3','rotate column x=6 by 3','rotate column x=5 by 1','rotate column x=3 by 1','rotate column x=2 by 1','rotate column x=1 by 1','rotate column x=0 by 1','rect 9x1','rotate column x=19 by 1','rotate column x=10 by 3','rotate column x=5 by 4','rotate row y=5 by 5','rotate row y=4 by 5','rotate row y=3 by 40','rotate row y=2 by 35','rotate row y=1 by 15','rotate row y=0 by 30','rotate column x=48 by 4','rotate column x=47 by 3','rotate column x=46 by 3','rotate column x=45 by 1','rotate column x=43 by 1','rotate column x=42 by 5','rotate column x=41 by 5','rotate column x=40 by 1','rotate column x=33 by 2','rotate column x=32 by 3','rotate column x=31 by 2','rotate column x=28 by 1','rotate column x=27 by 5','rotate column x=26 by 5','rotate column x=25 by 1','rotate column x=23 by 5','rotate column x=22 by 5','rotate column x=21 by 5','rotate column x=18 by 5','rotate column x=17 by 5','rotate column x=16 by 5','rotate column x=13 by 5','rotate column x=12 by 5','rotate column x=11 by 5','rotate column x=3 by 1','rotate column x=2 by 5','rotate column x=1 by 5','rotate column x=0 by 1'];

    const input2 = ['rect 3x2','rotate column x=1 by 1','rotate row y=0 by 4','rotate column x=1 by 1'];

    const screen = [
        ['.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.'],
        ['.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.'],
        ['.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.'],
        ['.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.'],
        ['.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.'],
        ['.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.', '.']
    ];

    const screen2 = [
        ['.', '.', '.', '.', '.', '.', '.'],
        ['.', '.', '.', '.', '.', '.', '.'],
        ['.', '.', '.', '.', '.', '.', '.'],
    ];

    const inputToUse = input;
    const screenToUse = screen;

    function printDisplay() {
        let litPixels = 0;

        // Print out the display on the screen (console)
        let screenDisplay = '';
        for(let col = 0; col < screenToUse.length; col++) {
            for(let row = 0; row < screenToUse[0].length; row++) {
                screenDisplay += screenToUse[col][row];

                if (screenToUse[col][row] === '#') {
                    litPixels++;
                }
            }
            screenDisplay += '\n';
        }
        console.log(screenDisplay + 'lit pixels:', litPixels);
    }

    // For all of the rows in the columns, starting from 0,0, turn it on (#)
    function rect(x, y, screen) {
        for(let col = 0; col < x; col++) {
            for(let row = 0; row < y; row++) {
                screen[row][col] = '#';
            }
        }
    }

    // Shift down the column
    function column(x, steps, screen) {
        // Perform the actions as many times as specified
        for(let step = 0; step < steps; step++) {
            // Get the character currently at the very bottom
            const farBottom = screen[screen.length - 1][x];

            // For every row, from the bottom, except the top, copy the character from one above
            for(let row = screen.length - 1; row > 0; row--) {
                screen[row][x] = screen[row-1][x];
            }
            // Put the character from the bottom on the top
            screen[0][x] = farBottom;
        }
    }

    // Shift along the row
    function row(y, steps, screen) {
        // Perform the actions as many times as specified
        for(let step = 0; step < steps; step++) {
            // Get the character currently at the far right border
            const farRight = screen[y][screen[y].length - 1];

            // For every column, from the right, except the far-left one, copy the character to the left
            for(let col = screen[y].length - 1; col > 0; col--) {
                screen[y][col] = screen[y][col - 1];
            }
            // Put the character from the far right on the far left
            screen[y][0] = farRight;
        }
    }

    printDisplay();
    inputToUse.forEach(command => {
        // Split each input
        const words = command.split(' ');
        const commandType = words[0];

        switch(commandType) {
            case 'rect':
                const x = words[1].split('x')[0];
                const y = words[1].split('x')[1];
                rect(x, y, screenToUse);
                break;
            case 'rotate':
                const direction = words[1];
                const position = words['2'].split('=')[1];
                const steps = words[words.length - 1];

                switch(direction) {
                    case 'column':
                        column(position, steps, screenToUse);
                        break;
                    case 'row':
                        row(position, steps, screenToUse);
                        break;
                }
                break;
        }
        console.log('command:', command);
        printDisplay();
    });
</script>
